<div class="flex h-full flex-col overflow-y-auto p-6 gap-6">
  @if (isLoading()) {
    <div class="flex h-full w-full justify-center items-center gap-2 text-gray-600 dark:text-gray-300">
      <lucide-icon [img]="LoaderCircleIcon" class="h-6 w-6 animate-spin"></lucide-icon>
      <span>Loading profile...</span>
    </div>
  } @else {
    @let currentUser = user();
    @if (currentUser) {
      <!-- Profile Header -->
      <div class="flex flex-col items-center gap-4 pb-6 border-b border-gray-200 dark:border-gray-800">
        @if (currentUser.picture) {
          <img
            [src]="currentUser.picture"
            [alt]="currentUser.name || 'User profile picture'"
            class="h-24 w-24 rounded-full border-4 border-white dark:border-gray-800 shadow-lg"
          />
        } @else {
          <div class="h-24 w-24 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 grid place-items-center shadow-lg">
            <lucide-icon [img]="UserIcon" class="h-12 w-12 text-white"></lucide-icon>
          </div>
        }
        
        <div class="text-center">
          <h1 class="text-2xl font-bold text-gray-900 dark:text-gray-50">
            {{ currentUser.name || 'User' }}
          </h1>
          @if (currentUser.nickname && currentUser.nickname !== currentUser.name) {
            <p class="text-sm text-gray-500 dark:text-gray-400">
              @{{ currentUser.nickname }}
            </p>
          }
        </div>
      </div>

      <!-- Profile Details -->
      <div class="space-y-4">
        <h2 class="text-lg font-semibold text-gray-900 dark:text-gray-50">
          Account Information
        </h2>

        <!-- Email -->
        @if (currentUser.email) {
          <div class="flex items-start gap-3 rounded-xl border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-gray-800">
            <div class="h-10 w-10 rounded-lg bg-indigo-100 dark:bg-indigo-900/30 grid place-items-center flex-shrink-0">
              <lucide-icon [img]="MailIcon" class="h-5 w-5 text-indigo-600 dark:text-indigo-400"></lucide-icon>
            </div>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium text-gray-500 dark:text-gray-400">Email</p>
              <p class="text-base text-gray-900 dark:text-gray-50 break-all">
                {{ currentUser.email }}
              </p>
              @if (currentUser.email_verified) {
                <span class="inline-flex items-center gap-1 mt-1 text-xs text-green-600 dark:text-green-400">
                  <lucide-icon [img]="ShieldIcon" class="h-3 w-3"></lucide-icon>
                  Verified
                </span>
              }
            </div>
          </div>
        }

        <!-- User ID -->
        @if (currentUser.sub) {
          <div class="flex items-start gap-3 rounded-xl border border-gray-200 bg-white p-4 dark:border-gray-800 dark:bg-gray-800">
            <div class="h-10 w-10 rounded-lg bg-purple-100 dark:bg-purple-900/30 grid place-items-center flex-shrink-0">
              <lucide-icon [img]="ShieldIcon" class="h-5 w-5 text-purple-600 dark:text-purple-400"></lucide-icon>
            </div>
            <div class="flex-1 min-w-0">
              <p class="text-sm font-medium text-gray-500 dark:text-gray-400">User ID</p>
              <p class="text-sm text-gray-900 dark:text-gray-50 font-mono break-all">
                {{ currentUser.sub }}
              </p>
            </div>
          </div>
        }

        <!-- Last Updated -->
        @if (currentUser.updated_at) {
          <div class="text-sm text-gray-500 dark:text-gray-400 text-center pt-2">
            Last updated: {{ currentUser.updated_at | date: 'medium' }}
          </div>
        }
      </div>

      <!-- Logout Button -->
      <div class="pt-4">
        <button
          (click)="logout()"
          class="w-full inline-flex items-center justify-center gap-2 rounded-xl bg-red-600 px-4 py-3
                 text-white font-medium hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2
                 dark:bg-red-700 dark:hover:bg-red-800 transition-colors"
        >
          <lucide-icon [img]="LogOutIcon" class="h-5 w-5"></lucide-icon>
          Log Out
        </button>
      </div>
    } @else {
      <div class="flex h-full w-full justify-center items-center text-gray-600 dark:text-gray-300">
        <p>No user information available</p>
      </div>
    }
  }
</div>
