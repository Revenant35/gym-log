<div class="flex h-screen flex-col overflow-hidden p-6 gap-6">
  <div class="w-full relative">
    <input
      type="text"
      class="w-full rounded-xl px-4 py-2.5 pr-10
        border border-gray-300 dark:border-gray-700
        bg-white dark:bg-gray-800
        text-gray-900 placeholder:text-gray-400 dark:text-gray-50
        focus:outline-none focus:ring-2 focus:ring-indigo-500"
      placeholder="Search exercises..."
      debounceTime="300"
      [(value)]="query"
    />
    <lucide-icon [img]="Search" class="pointer-events-none absolute right-3 top-1/2 -translate-y-1/2 h-5 w-5 text-gray-400"></lucide-icon>
  </div>

  <!-- Results area -->
  <div class="min-h-40 flex-grow overflow-y-auto">
    @if (exercisesResource.isLoading()) {
      <div class="flex h-full w-full justify-center items-center gap-2 text-gray-600 dark:text-gray-300">
        <lucide-icon [img]="LoaderCircle" class="h-5 w-5 animate-spin"></lucide-icon>
      </div>
    } @else {
      @let error = exercisesResource.error();
      @if (error) {
        <div class="flex items-start gap-2 rounded-xl border border-red-200 bg-red-50 p-4 text-red-700 dark:border-red-800 dark:bg-red-950/40 dark:text-red-300">
          <lucide-icon name="alert-circle" class="h-5 w-5 mt-0.5"></lucide-icon>
          <span>{{ error }}</span>
        </div>
      }

      @if (exercisesResource.hasValue()) {
        @let exercises = exercisesResource.value();
        <ul class="grid gap-2">
        @for (exercise of exercises; track exercise.id) {
          <li class="flex items-center justify-between rounded-xl border border-gray-200 bg-white p-3 dark:border-gray-800 dark:bg-gray-800">
            <div class="flex items-center gap-3">
              <div class="h-8 w-8 rounded-lg bg-gray-100 dark:bg-gray-700 grid place-items-center">
                <lucide-icon [img]="Dumbbell" class="h-5 w-5 text-gray-600 dark:text-gray-200"></lucide-icon>
              </div>
              <div class="font-medium text-gray-900 dark:text-gray-50">
                {{ exercise.name }}
              </div>
            </div>
            <!-- action slot -->
          </li>
        } @empty {
          <div class="flex items-center gap-2 text-gray-500 dark:text-gray-400">
            <lucide-icon [img]="Dumbbell" class="h-5 w-5"></lucide-icon>
            <span>No exercises found.</span>
          </div>
        }
        </ul>
      }
    }
  </div>

  <!-- Pager -->
  <div class="flex items-center justify-between gap-4">
    <button
      (click)="prevPage()"
      [disabled]="page() === 1 || exercisesResource.isLoading()"
      class="inline-flex items-center justify-center rounded-full border border-gray-300 bg-white p-2
         text-gray-900 hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none
         dark:border-gray-700 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-gray-700/80"
      aria-label="Previous page"
    >
      <lucide-icon [img]="ChevronLeft" class="h-4 w-4"></lucide-icon>
    </button>

    <div class="text-sm text-gray-600 dark:text-gray-300">
      Page <span class="font-medium">{{ page() }}</span>
    </div>

    <!-- Next button -->
    <button
      (click)="nextPage()"
      [disabled]="exercisesResource.value().length < limit() || exercisesResource.isLoading()"
      class="inline-flex items-center justify-center rounded-full border border-gray-300 bg-white p-2
         text-gray-900 hover:bg-gray-50 disabled:opacity-50 disabled:pointer-events-none
         dark:border-gray-700 dark:bg-gray-800 dark:text-gray-50 dark:hover:bg-gray-700/80"
      aria-label="Next page"
    >
      <lucide-icon [img]="ChevronRight" class="h-4 w-4"></lucide-icon>
    </button>
  </div>
</div>
